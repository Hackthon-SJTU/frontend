<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReasoningACTION - å¤šæ¨¡æ€å†…å®¹ç”Ÿæˆç³»ç»Ÿ</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡ */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }
        
        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes slideInUp {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.05);
                opacity: 0.8;
            }
        }
        
        @keyframes spin {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }
        
        .animate-slide-up {
            animation: slideInUp 0.5s ease-out;
        }
        
        .animate-pulse {
            animation: pulse 2s infinite;
        }
        
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        
        /* ç»ç’ƒæ€æ•ˆæœ */
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .glass-dark {
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* æŒ‰é’®æ•ˆæœ */
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        /* å¡ç‰‡æ•ˆæœ */
        .card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.15);
        }
        
        /* è¿›åº¦æ¡ */
        .progress-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        /* å·¥ä½œæµæ­¥éª¤ */
        .workflow-step {
            position: relative;
            padding-left: 40px;
        }
        
        .workflow-step::before {
            content: '';
            position: absolute;
            left: 11px;
            top: 40px;
            width: 2px;
            height: calc(100% - 20px);
            background: rgba(255, 255, 255, 0.2);
        }
        
        .workflow-step:last-child::before {
            display: none;
        }
        
        .workflow-step-icon {
            position: absolute;
            left: 0;
            top: 0;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            color: #667eea;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .workflow-step.active .workflow-step-icon {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            animation: pulse 2s infinite;
        }
        
        .workflow-step.completed .workflow-step-icon {
            background: #10b981;
            color: white;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback } = React;
        
        // APIé…ç½®
        const API_BASE_URL = 'http://localhost:8000';
        
        // APIå®¢æˆ·ç«¯
        class APIClient {
            static async request(endpoint, options = {}) {
                try {
                    const response = await fetch(`${API_BASE_URL}${endpoint}`, {
                        ...options,
                        headers: {
                            'Content-Type': 'application/json',
                            ...options.headers,
                        },
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    return await response.json();
                } catch (error) {
                    console.error('API Error:', error);
                    throw error;
                }
            }
            
            // æ–‡ç”Ÿå›¾
            static async textToImage(prompt, config = {}) {
                return this.request('/api/text-to-image', {
                    method: 'POST',
                    body: JSON.stringify({ prompt, ...config }),
                });
            }
            
            // å›¾ç”Ÿè§†é¢‘
            static async imageToVideo(imageUrl, config = {}) {
                return this.request('/api/image-to-video', {
                    method: 'POST',
                    body: JSON.stringify({ image_url: imageUrl, ...config }),
                });
            }
            
            // è§†é¢‘ç”ŸéŸ³é¢‘
            static async videoToAudio(videoUrl, config = {}) {
                return this.request('/api/video-to-audio', {
                    method: 'POST',
                    body: JSON.stringify({ video_url: videoUrl, ...config }),
                });
            }
            
            // åˆå¹¶è§†é¢‘
            static async mergeVideos(videoSegments, audioUrl, config = {}) {
                return this.request('/api/merge-videos', {
                    method: 'POST',
                    body: JSON.stringify({ 
                        video_segments: videoSegments, 
                        audio_url: audioUrl,
                        ...config 
                    }),
                });
            }
            
            // æ‰§è¡Œå·¥ä½œæµ
            static async executeWorkflow(prompt, iterations, config = {}) {
                return this.request('/api/workflow', {
                    method: 'POST',
                    body: JSON.stringify({ 
                        prompt, 
                        iterations,
                        auto_enhance: true,
                        workflow_config: config 
                    }),
                });
            }
            
            // è·å–ä»»åŠ¡çŠ¶æ€
            static async getTaskStatus(taskId) {
                return this.request(`/api/tasks/${taskId}`);
            }
            
            // è·å–ä»»åŠ¡åˆ—è¡¨
            static async listTasks(status = null) {
                const query = status ? `?status=${status}` : '';
                return this.request(`/api/tasks${query}`);
            }
            
            // å–æ¶ˆä»»åŠ¡
            static async cancelTask(taskId) {
                return this.request(`/api/tasks/${taskId}`, {
                    method: 'DELETE',
                });
            }
        }
        
        // ä¸»åº”ç”¨ç»„ä»¶
        function App() {
            const [currentView, setCurrentView] = useState('workflow'); // workflow | history
            const [workflowState, setWorkflowState] = useState({
                prompt: '',
                iterations: 10,
                status: 'idle', // idle | processing | completed | error
                currentStep: 0,
                totalSteps: 0,
                progress: 0,
                result: null,
                error: null,
            });
            const [tasks, setTasks] = useState([]);
            const [currentTaskId, setCurrentTaskId] = useState(null);
            const pollIntervalRef = useRef(null);
            
            // å·¥ä½œæµæ­¥éª¤å®šä¹‰
            const workflowSteps = [
                { id: 'text-to-image', name: 'æ–‡æœ¬ç”Ÿæˆå›¾åƒ', icon: 'ğŸ¨' },
                { id: 'image-to-video', name: 'å›¾åƒç”Ÿæˆè§†é¢‘', icon: 'ğŸ¬' },
                { id: 'video-to-audio', name: 'è§†é¢‘æ¨ç†éŸ³é¢‘', icon: 'ğŸµ' },
                { id: 'merge', name: 'éŸ³è§†é¢‘åˆæˆ', icon: 'ğŸï¸' },
                { id: 'complete', name: 'å®Œæˆ', icon: 'âœ…' },
            ];
            
            // è·å–å½“å‰æ­¥éª¤
            const getCurrentStep = (progress) => {
                if (progress === 0) return 0;
                if (progress < 25) return 0;
                if (progress < 50) return 1;
                if (progress < 75) return 2;
                if (progress < 90) return 3;
                return 4;
            };
            
            // è½®è¯¢ä»»åŠ¡çŠ¶æ€
            const pollTaskStatus = useCallback(async (taskId) => {
                try {
                    const task = await APIClient.getTaskStatus(taskId);
                    
                    setWorkflowState(prev => ({
                        ...prev,
                        progress: task.progress,
                        currentStep: getCurrentStep(task.progress),
                    }));
                    
                    if (task.status === 'success') {
                        setWorkflowState(prev => ({
                            ...prev,
                            status: 'completed',
                            result: task.result,
                            progress: 100,
                            currentStep: 4,
                        }));
                        stopPolling();
                    } else if (task.status === 'failed') {
                        setWorkflowState(prev => ({
                            ...prev,
                            status: 'error',
                            error: task.error || 'å¤„ç†å¤±è´¥',
                        }));
                        stopPolling();
                    }
                } catch (error) {
                    console.error('è½®è¯¢é”™è¯¯:', error);
                }
            }, []);
            
            // åœæ­¢è½®è¯¢
            const stopPolling = () => {
                if (pollIntervalRef.current) {
                    clearInterval(pollIntervalRef.current);
                    pollIntervalRef.current = null;
                }
            };
            
            // å¼€å§‹å·¥ä½œæµ
            const startWorkflow = async () => {
                if (!workflowState.prompt.trim()) {
                    alert('è¯·è¾“å…¥æç¤ºè¯');
                    return;
                }
                
                setWorkflowState(prev => ({
                    ...prev,
                    status: 'processing',
                    currentStep: 0,
                    progress: 0,
                    result: null,
                    error: null,
                }));
                
                try {
                    // è°ƒç”¨å·¥ä½œæµAPI
                    const response = await APIClient.executeWorkflow(
                        workflowState.prompt,
                        workflowState.iterations,
                        {
                            image_config: { width: 1024, height: 768 },
                            video_config: { fps: 30, motion_scale: 1.5 },
                            audio_config: { audio_style: 'cinematic', include_sfx: true },
                            merge_config: { quality: 'high', output_format: 'mp4' }
                        }
                    );
                    
                    setCurrentTaskId(response.task_id);
                    
                    // å¼€å§‹è½®è¯¢
                    pollIntervalRef.current = setInterval(() => {
                        pollTaskStatus(response.task_id);
                    }, 1000);
                    
                } catch (error) {
                    setWorkflowState(prev => ({
                        ...prev,
                        status: 'error',
                        error: error.message,
                    }));
                }
            };
            
            // é‡ç½®å·¥ä½œæµ
            const resetWorkflow = () => {
                stopPolling();
                setWorkflowState({
                    prompt: '',
                    iterations: 10,
                    status: 'idle',
                    currentStep: 0,
                    totalSteps: 0,
                    progress: 0,
                    result: null,
                    error: null,
                });
                setCurrentTaskId(null);
            };
            
            // åŠ è½½å†å²ä»»åŠ¡
            const loadTasks = async () => {
                try {
                    const taskList = await APIClient.listTasks();
                    setTasks(taskList);
                } catch (error) {
                    console.error('åŠ è½½ä»»åŠ¡å¤±è´¥:', error);
                }
            };
            
            // ç»„ä»¶æŒ‚è½½æ—¶åŠ è½½ä»»åŠ¡
            useEffect(() => {
                if (currentView === 'history') {
                    loadTasks();
                }
            }, [currentView]);
            
            // ç»„ä»¶å¸è½½æ—¶æ¸…ç†
            useEffect(() => {
                return () => {
                    stopPolling();
                };
            }, []);
            
            return (
                <div className="min-h-screen p-6">
                    {/* å¤´éƒ¨ */}
                    <header className="glass rounded-2xl p-6 mb-6 animate-slide-up">
                        <div className="flex items-center justify-between">
                            <div>
                                <h1 className="text-3xl font-bold text-white mb-2">
                                    ReasoningACTION å¤šæ¨¡æ€ç”Ÿæˆç³»ç»Ÿ
                                </h1>
                                <p className="text-white/80">
                                    åŸºäºå¤§æ¨¡å‹çš„æ™ºèƒ½å†…å®¹åˆ›ä½œå¹³å° - æ–‡æœ¬â†’å›¾åƒâ†’è§†é¢‘â†’éŸ³é¢‘
                                </p>
                            </div>
                            <div className="flex gap-2">
                                <button
                                    onClick={() => setCurrentView('workflow')}
                                    className={`px-4 py-2 rounded-lg font-medium transition-all ${
                                        currentView === 'workflow' 
                                            ? 'bg-white text-purple-600' 
                                            : 'bg-white/20 text-white hover:bg-white/30'
                                    }`}
                                >
                                    å·¥ä½œæµ
                                </button>
                                <button
                                    onClick={() => setCurrentView('history')}
                                    className={`px-4 py-2 rounded-lg font-medium transition-all ${
                                        currentView === 'history' 
                                            ? 'bg-white text-purple-600' 
                                            : 'bg-white/20 text-white hover:bg-white/30'
                                    }`}
                                >
                                    å†å²è®°å½•
                                </button>
                            </div>
                        </div>
                    </header>
                    
                    {/* ä¸»å†…å®¹åŒº */}
                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        {/* å·¦ä¾§æ§åˆ¶é¢æ¿ */}
                        <div className="lg:col-span-1">
                            <div className="card animate-slide-up" style={{ animationDelay: '0.1s' }}>
                                <h2 className="text-xl font-semibold mb-4">åˆ›ä½œæ§åˆ¶å°</h2>
                                
                                {/* è¾“å…¥åŒºåŸŸ */}
                                <div className="space-y-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                            åˆ›ä½œæç¤ºè¯
                                        </label>
                                        <textarea
                                            value={workflowState.prompt}
                                            onChange={(e) => setWorkflowState(prev => ({
                                                ...prev,
                                                prompt: e.target.value
                                            }))}
                                            placeholder="æè¿°æ‚¨æƒ³è¦åˆ›ä½œçš„å†…å®¹ï¼Œä¾‹å¦‚ï¼šå®é™çš„æ£®æ—ä¸­æµæ·Œçš„æºªæ°´..."
                                            className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none"
                                            rows="4"
                                            disabled={workflowState.status === 'processing'}
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                            è¿­ä»£æ¬¡æ•°ï¼ˆæ¯æ¬¡4ç§’ï¼‰
                                        </label>
                                        <div className="flex items-center gap-4">
                                            <input
                                                type="range"
                                                min="1"
                                                max="20"
                                                value={workflowState.iterations}
                                                onChange={(e) => setWorkflowState(prev => ({
                                                    ...prev,
                                                    iterations: parseInt(e.target.value)
                                                }))}
                                                className="flex-1"
                                                disabled={workflowState.status === 'processing'}
                                            />
                                            <div className="text-center">
                                                <span className="text-2xl font-bold text-purple-600">
                                                    {workflowState.iterations}
                                                </span>
                                                <div className="text-xs text-gray-500">
                                                    æ€»æ—¶é•¿: {workflowState.iterations * 4}ç§’
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    {/* é«˜çº§è®¾ç½®ï¼ˆå¯å±•å¼€ï¼‰ */}
                                    <details className="border border-gray-200 rounded-lg p-4">
                                        <summary className="cursor-pointer font-medium text-gray-700">
                                            é«˜çº§è®¾ç½®
                                        </summary>
                                        <div className="mt-4 space-y-3">
                                            <div>
                                                <label className="text-sm text-gray-600">å›¾åƒåˆ†è¾¨ç‡</label>
                                                <select className="w-full mt-1 px-3 py-2 border border-gray-200 rounded-lg">
                                                    <option>1024x768 (æ¨è)</option>
                                                    <option>1920x1080</option>
                                                    <option>512x512</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label className="text-sm text-gray-600">è§†é¢‘å¸§ç‡</label>
                                                <select className="w-full mt-1 px-3 py-2 border border-gray-200 rounded-lg">
                                                    <option>30 FPS (æ¨è)</option>
                                                    <option>24 FPS</option>
                                                    <option>60 FPS</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label className="text-sm text-gray-600">éŸ³é¢‘é£æ ¼</label>
                                                <select className="w-full mt-1 px-3 py-2 border border-gray-200 rounded-lg">
                                                    <option>ç”µå½±æ„Ÿ (Cinematic)</option>
                                                    <option>ç¯å¢ƒéŸ³ (Ambient)</option>
                                                    <option>å²è¯—æ„Ÿ (Epic)</option>
                                                    <option>è‡ªç„¶ (Natural)</option>
                                                </select>
                                            </div>
                                        </div>
                                    </details>
                                    
                                    {/* æ“ä½œæŒ‰é’® */}
                                    <div className="flex gap-3">
                                        {workflowState.status === 'idle' && (
                                            <button
                                                onClick={startWorkflow}
                                                className="flex-1 btn-primary"
                                            >
                                                å¼€å§‹åˆ›ä½œ
                                            </button>
                                        )}
                                        
                                        {workflowState.status === 'processing' && (
                                            <button
                                                className="flex-1 btn-primary opacity-50 cursor-not-allowed"
                                                disabled
                                            >
                                                <span className="inline-block animate-spin mr-2">âš™ï¸</span>
                                                å¤„ç†ä¸­...
                                            </button>
                                        )}
                                        
                                        {workflowState.status === 'completed' && (
                                            <>
                                                <button
                                                    onClick={resetWorkflow}
                                                    className="flex-1 btn-primary"
                                                >
                                                    æ–°å»ºåˆ›ä½œ
                                                </button>
                                                <button className="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-all">
                                                    ä¸‹è½½ç»“æœ
                                                </button>
                                            </>
                                        )}
                                        
                                        {workflowState.status === 'error' && (
                                            <button
                                                onClick={resetWorkflow}
                                                className="flex-1 btn-primary"
                                            >
                                                é‡æ–°å¼€å§‹
                                            </button>
                                        )}
                                    </div>
                                    
                                    {/* é”™è¯¯æç¤º */}
                                    {workflowState.error && (
                                        <div className="p-3 bg-red-50 border border-red-200 rounded-lg">
                                            <p className="text-sm text-red-600">
                                                âš ï¸ {workflowState.error}
                                            </p>
                                        </div>
                                    )}
                                </div>
                            </div>
                            
                            {/* å·¥ä½œæµæ­¥éª¤æŒ‡ç¤ºå™¨ */}
                            <div className="card mt-6 animate-slide-up" style={{ animationDelay: '0.2s' }}>
                                <h3 className="text-lg font-semibold mb-4">å¤„ç†æµç¨‹</h3>
                                <div className="space-y-4">
                                    {workflowSteps.map((step, index) => (
                                        <div
                                            key={step.id}
                                            className={`workflow-step ${
                                                index === workflowState.currentStep ? 'active' : ''
                                            } ${
                                                index < workflowState.currentStep ? 'completed' : ''
                                            }`}
                                        >
                                            <div className="workflow-step-icon">
                                                {index < workflowState.currentStep ? 'âœ“' : step.icon}
                                            </div>
                                            <div className="ml-2">
                                                <div className="font-medium">{step.name}</div>
                                                {index === 1 && workflowState.status === 'processing' && (
                                                    <div className="text-xs text-gray-500 mt-1">
                                                        ç”Ÿæˆ {workflowState.iterations} ä¸ªç‰‡æ®µ...
                                                    </div>
                                                )}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                                
                                {/* æ€»è¿›åº¦æ¡ */}
                                {workflowState.status === 'processing' && (
                                    <div className="mt-6">
                                        <div className="flex justify-between text-sm text-gray-600 mb-2">
                                            <span>æ€»è¿›åº¦</span>
                                            <span>{Math.round(workflowState.progress)}%</span>
                                        </div>
                                        <div className="progress-bar">
                                            <div 
                                                className="progress-fill"
                                                style={{ width: `${workflowState.progress}%` }}
                                            />
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                        
                        {/* å³ä¾§å†…å®¹åŒº */}
                        <div className="lg:col-span-2">
                            {currentView === 'workflow' ? (
                                <div className="card animate-slide-up" style={{ animationDelay: '0.3s' }}>
                                    <h2 className="text-xl font-semibold mb-4">é¢„è§ˆåŒºåŸŸ</h2>
                                    
                                    {/* ç©ºçŠ¶æ€ */}
                                    {workflowState.status === 'idle' && (
                                        <div className="text-center py-20">
                                            <div className="text-6xl mb-4">ğŸ¨</div>
                                            <p className="text-gray-500">
                                                è¾“å…¥åˆ›ä½œæç¤ºè¯ï¼Œå¼€å§‹æ‚¨çš„å¤šæ¨¡æ€å†…å®¹åˆ›ä½œä¹‹æ—…
                                            </p>
                                        </div>
                                    )}
                                    
                                    {/* å¤„ç†ä¸­ */}
                                    {workflowState.status === 'processing' && (
                                        <div className="text-center py-20">
                                            <div className="text-6xl mb-4 animate-pulse">ğŸ¬</div>
                                            <p className="text-lg font-medium mb-2">
                                                æ­£åœ¨åˆ›ä½œä¸­...
                                            </p>
                                            <p className="text-gray-500">
                                                {workflowSteps[workflowState.currentStep]?.name}
                                            </p>
                                            <div className="mt-8 max-w-md mx-auto">
                                                <div className="progress-bar">
                                                    <div 
                                                        className="progress-fill"
                                                        style={{ width: `${workflowState.progress}%` }}
                                                    />
                                                </div>
                                            </div>
                                        </div>
                                    )}
                                    
                                    {/* å®ŒæˆçŠ¶æ€ */}
                                    {workflowState.status === 'completed' && workflowState.result && (
                                        <div>
                                            <div className="bg-gray-100 rounded-lg p-8 mb-6">
                                                <div className="text-center">
                                                    <div className="text-6xl mb-4">ğŸ‰</div>
                                                    <h3 className="text-2xl font-bold mb-2">åˆ›ä½œå®Œæˆï¼</h3>
                                                    <p className="text-gray-600">
                                                        æˆåŠŸç”Ÿæˆ {workflowState.result.workflow_summary?.total_duration_seconds} ç§’è§†é¢‘
                                                    </p>
                                                </div>
                                            </div>
                                            
                                            {/* ç»“æœè¯¦æƒ… */}
                                            <div className="grid grid-cols-2 gap-4">
                                                <div className="bg-gray-50 rounded-lg p-4">
                                                    <div className="text-sm text-gray-500">è§†é¢‘æ–‡ä»¶</div>
                                                    <div className="font-medium mt-1">
                                                        {workflowState.result.final_video}
                                                    </div>
                                                </div>
                                                <div className="bg-gray-50 rounded-lg p-4">
                                                    <div className="text-sm text-gray-500">éŸ³é¢‘æ–‡ä»¶</div>
                                                    <div className="font-medium mt-1">
                                                        {workflowState.result.audio}
                                                    </div>
                                                </div>
                                                <div className="bg-gray-50 rounded-lg p-4">
                                                    <div className="text-sm text-gray-500">ç‰‡æ®µæ•°é‡</div>
                                                    <div className="font-medium mt-1">
                                                        {workflowState.result.workflow_summary?.segments_count} ä¸ª
                                                    </div>
                                                </div>
                                                <div className="bg-gray-50 rounded-lg p-4">
                                                    <div className="text-sm text-gray-500">å¤„ç†æ­¥éª¤</div>
                                                    <div className="font-medium mt-1">
                                                        {workflowState.result.workflow_summary?.processing_steps} æ­¥
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            {/* è§†é¢‘ç‰‡æ®µåˆ—è¡¨ */}
                                            <div className="mt-6">
                                                <h4 className="font-medium mb-3">ç”Ÿæˆçš„è§†é¢‘ç‰‡æ®µ</h4>
                                                <div className="space-y-2">
                                                    {workflowState.result.segments?.map((segment, index) => (
                                                        <div 
                                                            key={index}
                                                            className="flex items-center justify-between bg-gray-50 rounded-lg px-4 py-2"
                                                        >
                                                            <span className="text-sm">
                                                                ç‰‡æ®µ {index + 1}: {segment}
                                                            </span>
                                                            <span className="text-xs text-gray-500">4ç§’</span>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    )}
                                    
                                    {/* é”™è¯¯çŠ¶æ€ */}
                                    {workflowState.status === 'error' && (
                                        <div className="text-center py-20">
                                            <div className="text-6xl mb-4">ğŸ˜”</div>
                                            <p className="text-lg font-medium mb-2">
                                                å¤„ç†å¤±è´¥
                                            </p>
                                            <p className="text-gray-500">
                                                {workflowState.error}
                                            </p>
                                        </div>
                                    )}
                                </div>
                            ) : (
                                /* å†å²è®°å½•è§†å›¾ */
                                <div className="card animate-slide-up">
                                    <div className="flex items-center justify-between mb-4">
                                        <h2 className="text-xl font-semibold">å†å²ä»»åŠ¡</h2>
                                        <button
                                            onClick={loadTasks}
                                            className="px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg transition-all"
                                        >
                                            åˆ·æ–°
                                        </button>
                                    </div>
                                    
                                    {tasks.length === 0 ? (
                                        <div className="text-center py-10">
                                            <p className="text-gray-500">æš‚æ— å†å²ä»»åŠ¡</p>
                                        </div>
                                    ) : (
                                        <div className="space-y-3">
                                            {tasks.map((task) => (
                                                <div 
                                                    key={task.task_id}
                                                    className="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-all"
                                                >
                                                    <div className="flex items-center justify-between">
                                                        <div>
                                                            <div className="font-medium">
                                                                {task.metadata?.type || 'Unknown'}
                                                            </div>
                                                            <div className="text-sm text-gray-500">
                                                                ID: {task.task_id.slice(0, 8)}...
                                                            </div>
                                                        </div>
                                                        <div className="text-right">
                                                            <div className={`inline-block px-2 py-1 rounded text-xs font-medium ${
                                                                task.status === 'success' ? 'bg-green-100 text-green-700' :
                                                                task.status === 'processing' ? 'bg-blue-100 text-blue-700' :
                                                                task.status === 'failed' ? 'bg-red-100 text-red-700' :
                                                                'bg-gray-100 text-gray-700'
                                                            }`}>
                                                                {task.status}
                                                            </div>
                                                            <div className="text-xs text-gray-500 mt-1">
                                                                {new Date(task.created_at).toLocaleString()}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    {task.metadata?.prompt && (
                                                        <div className="mt-2 text-sm text-gray-600">
                                                            {task.metadata.prompt}
                                                        </div>
                                                    )}
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            )}
                        </div>
                    </div>
                    
                    {/* é¡µè„š */}
                    <footer className="mt-12 text-center text-white/60 text-sm">
                        <p>ReasoningACTION System v1.0.0 | Powered by Advanced AI Models</p>
                    </footer>
                </div>
            );
        }
        
        // æ¸²æŸ“åº”ç”¨
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>